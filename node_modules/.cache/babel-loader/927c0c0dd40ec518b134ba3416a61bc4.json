{"ast":null,"code":"import _asyncToGenerator from\"/Users/ashwininagaraj/Github Mock/explore-github/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ashwininagaraj/Github Mock/explore-github/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/ashwininagaraj/Github Mock/explore-github/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect}from\"react\";import ReactPaginate from\"react-paginate\";import{getUserInfo,getUserRepositoriesInitial,getUserStarredRepos,getUserRepositoriesNextPage,getAllRepositories}from\"../component/apis/api\";import Navbar from\"../component/nav-bar/Navbar\";import NavItems from\"../component/nav-items/NavItems\";import UserProfile from\"../component/user-profile/UserProfile\";import ListRepositories from\"../component/repositories/ListRepositories\";import Loading from\"../component/loading/Loading\";import\"./container.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ErrorScreen=function ErrorScreen(){var errorImg=\"https://www.pngitem.com/pimgs/m/255-2550411_404-error-images-free-png-transparent-png.png\";return/*#__PURE__*/_jsxs(\"div\",{\"data-testid\":\"wrapper-div\",className:\"error-page-wrapper\",children:[/*#__PURE__*/_jsx(\"img\",{\"data-testid\":\"err-img\",className:\"error-img\",alt:\"#\",src:errorImg}),/*#__PURE__*/_jsx(\"span\",{\"data-testid\":\"redirect\",className:\"try-again-text\",onClick:function onClick(){window.location.href=\"/\";},children:\"Try Again?\"})]});};function SearchRepo(_ref){var match=_ref.match;var _useState=useState(),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),repositories=_useState6[0],setRepositories=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),initalRepositories=_useState8[0],setRepositoriesInital=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),starredRepositories=_useState10[0],setstarredRepositories=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),allRepositories=_useState12[0],setAllRepositories=_useState12[1];var userNameParams=match.params.userName;var respoSearch=function respoSearch(searchValue){var searchArray=allRepositories===null||allRepositories===void 0?void 0:allRepositories.filter(function(obj){return obj.name.toLowerCase().includes(searchValue.toLowerCase());});setRepositories(searchArray);};var onChangeCallback=function onChangeCallback(value){if(value.length===0){setRepositories(initalRepositories);}};useEffect(function(page){fetchUser();fetchRepositories();fetchUserStarredRepositories();handlePageClick(page);fetchAllRepositories();/* eslint-disable-next-line react-hooks/exhaustive-deps */},[]);function fetchUser(){return _fetchUser.apply(this,arguments);}function _fetchUser(){_fetchUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$getUserInfo,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getUserInfo(userNameParams);case 3:_yield$getUserInfo=_context.sent;data=_yield$getUserInfo.data;setUser(data);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);setError(true);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return _fetchUser.apply(this,arguments);}function fetchRepositories(){return _fetchRepositories.apply(this,arguments);}function _fetchRepositories(){_fetchRepositories=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$getUserReposit,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return getUserRepositoriesInitial(userNameParams);case 3:_yield$getUserReposit=_context2.sent;data=_yield$getUserReposit.data;setRepositories(data);setRepositoriesInital(data);_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);setError(true);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return _fetchRepositories.apply(this,arguments);}function fetchUserStarredRepositories(){return _fetchUserStarredRepositories.apply(this,arguments);}function _fetchUserStarredRepositories(){_fetchUserStarredRepositories=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _yield$getUserStarred,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return getUserStarredRepos(userNameParams);case 2:_yield$getUserStarred=_context3.sent;data=_yield$getUserStarred.data;setstarredRepositories(data);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return _fetchUserStarredRepositories.apply(this,arguments);}function fetchAllRepositories(){return _fetchAllRepositories.apply(this,arguments);}function _fetchAllRepositories(){_fetchAllRepositories=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var _yield$getAllReposito,data;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return getAllRepositories(userNameParams);case 2:_yield$getAllReposito=_context4.sent;data=_yield$getAllReposito.data;setAllRepositories(data);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return _fetchAllRepositories.apply(this,arguments);}function handlePageClick(_x){return _handlePageClick.apply(this,arguments);}function _handlePageClick(){_handlePageClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(page){var currentPage,_yield$getUserReposit2,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:currentPage=page.selected+1;_context5.next=3;return getUserRepositoriesNextPage(userNameParams,currentPage);case 3:_yield$getUserReposit2=_context5.sent;data=_yield$getUserReposit2.data;setRepositories(data);setRepositoriesInital(data);case 7:case\"end\":return _context5.stop();}}},_callee5);}));return _handlePageClick.apply(this,arguments);}return/*#__PURE__*/_jsx(_Fragment,{children:user?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{\"data-testid\":\"nav-bar\",user:user}),/*#__PURE__*/_jsxs(\"div\",{\"data-testid\":\"conatiner\",className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"left\",children:/*#__PURE__*/_jsx(UserProfile,{\"data-testid\":\"userProfile\",user:user,starredRepositories:starredRepositories})}),/*#__PURE__*/_jsxs(\"div\",{class:\"right\",children:[/*#__PURE__*/_jsx(NavItems,{\"data-testid\":\"nav-items\",user:user,repoSearchCallback:respoSearch,onChangeCallback:onChangeCallback}),/*#__PURE__*/_jsx(ListRepositories,{\"data-testid\":\"list-repos\",repos:repositories,user:user}),user.public_repos>6&&/*#__PURE__*/_jsx(ReactPaginate,{\"data-testid\":\"paginate\",user:user,previousLabel:\"previous\",nextLabel:\"next\",breakLabel:\"...\",pageCount:Math.ceil(user.public_repos/10),marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:handlePageClick,containerClassName:\"pagination justify-content-center\",pageClassName:\"page-item\",pageLinkClassName:\"page-link\",previousClassName:\"page-item\",previousLinkClassName:\"page-link\",nextClassName:\"page-item\",nextLinkClassName:\"page-link\",breakClassName:\"page-item\",breakLinkClassName:\"page-link\",activeClassName:\"active\"})]})]})]}):/*#__PURE__*/_jsx(_Fragment,{children:error?/*#__PURE__*/_jsx(ErrorScreen,{}):/*#__PURE__*/_jsx(Loading,{})})});}export default SearchRepo;","map":{"version":3,"sources":["/Users/ashwininagaraj/Github Mock/explore-github/src/container/SearchRepo.js"],"names":["React","useState","useEffect","ReactPaginate","getUserInfo","getUserRepositoriesInitial","getUserStarredRepos","getUserRepositoriesNextPage","getAllRepositories","Navbar","NavItems","UserProfile","ListRepositories","Loading","ErrorScreen","errorImg","window","location","href","SearchRepo","match","user","setUser","error","setError","repositories","setRepositories","initalRepositories","setRepositoriesInital","starredRepositories","setstarredRepositories","allRepositories","setAllRepositories","userNameParams","params","userName","respoSearch","searchValue","searchArray","filter","obj","name","toLowerCase","includes","onChangeCallback","value","length","page","fetchUser","fetchRepositories","fetchUserStarredRepositories","handlePageClick","fetchAllRepositories","data","currentPage","selected","public_repos","Math","ceil"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport ReactPaginate from \"react-paginate\";\nimport {\n  getUserInfo,\n  getUserRepositoriesInitial,\n  getUserStarredRepos,\n  getUserRepositoriesNextPage,\n  getAllRepositories,\n} from \"../component/apis/api\";\n\n\nimport Navbar from \"../component/nav-bar/Navbar\";\nimport NavItems from \"../component/nav-items/NavItems\";\nimport UserProfile from \"../component/user-profile/UserProfile\";\nimport ListRepositories from \"../component/repositories/ListRepositories\";\nimport Loading from \"../component/loading/Loading\";\nimport \"./container.css\";\n\nconst ErrorScreen = () => {\n  const errorImg =\n    \"https://www.pngitem.com/pimgs/m/255-2550411_404-error-images-free-png-transparent-png.png\";\n  return (\n    <div data-testid=\"wrapper-div\" className=\"error-page-wrapper\">\n      <img data-testid=\"err-img\" className=\"error-img\" alt=\"#\" src={errorImg} />\n      <span\n        data-testid=\"redirect\"\n        className=\"try-again-text\"\n        onClick={() => {\n          window.location.href = \"/\";\n        }}\n      >\n        Try Again?\n      </span>\n    </div>\n  );\n};\n\nfunction SearchRepo({ match }) {\n  const [user, setUser] = useState();\n  const [error, setError] = useState(false);\n  const [repositories, setRepositories] = useState([]);\n  const [initalRepositories, setRepositoriesInital] = useState([]);\n  const [starredRepositories, setstarredRepositories] = useState([]);\n  const [allRepositories, setAllRepositories] = useState([]);\n\n  const userNameParams = match.params.userName;\n\n  const respoSearch = (searchValue) => {\n    const searchArray = allRepositories?.filter((obj) =>\n      obj.name.toLowerCase().includes(searchValue.toLowerCase())\n    );\n    setRepositories(searchArray);\n  };\n\n  const onChangeCallback = (value) => {\n    if (value.length === 0) {\n      setRepositories(initalRepositories);\n    }\n  };\n\n  useEffect((page) => {\n    fetchUser();\n    fetchRepositories();\n    fetchUserStarredRepositories();\n    handlePageClick(page);\n    fetchAllRepositories();\n    /* eslint-disable-next-line react-hooks/exhaustive-deps */\n  }, []);\n\n  async function fetchUser() {\n    try {\n      const { data } = await getUserInfo(userNameParams);\n      setUser(data);\n    } catch (e) {\n      setError(true);\n    }\n  }\n  async function fetchRepositories() {\n    try {\n      const { data } = await getUserRepositoriesInitial(userNameParams);\n      setRepositories(data);\n      setRepositoriesInital(data);\n    } catch (e) {\n      setError(true);\n    }\n  }\n  async function fetchUserStarredRepositories() {\n    const { data } = await getUserStarredRepos(userNameParams);\n    setstarredRepositories(data);\n  }\n\n  async function fetchAllRepositories() {\n    const { data } = await getAllRepositories(userNameParams);\n    setAllRepositories(data);\n  }\n\n  async function handlePageClick(page) {\n    let currentPage = page.selected + 1;\n    const { data } = await getUserRepositoriesNextPage(\n      userNameParams,\n      currentPage\n    );\n    setRepositories(data);\n    setRepositoriesInital(data);\n  }\n\n  return (\n    <>\n      {user ? (\n        <>\n          <Navbar data-testid=\"nav-bar\" user={user} />\n          <div data-testid=\"conatiner\" className=\"container\">\n            <div class=\"left\">\n              <UserProfile\n                data-testid=\"userProfile\"\n                user={user}\n                starredRepositories={starredRepositories}\n              />\n            </div>\n            <div class=\"right\">\n              <NavItems\n                data-testid=\"nav-items\"\n                user={user}\n                repoSearchCallback={respoSearch}\n                onChangeCallback={onChangeCallback}\n              />\n              <ListRepositories data-testid=\"list-repos\" repos={repositories} user={user} />\n              {user.public_repos > 6 && (\n                <ReactPaginate\n                  data-testid=\"paginate\"\n                  user={user}\n                  previousLabel={\"previous\"}\n                  nextLabel={\"next\"}\n                  breakLabel={\"...\"}\n                  pageCount={Math.ceil(user.public_repos / 10)}\n                  marginPagesDisplayed={2}\n                  pageRangeDisplayed={3}\n                  onPageChange={handlePageClick}\n                  containerClassName={\"pagination justify-content-center\"}\n                  pageClassName={\"page-item\"}\n                  pageLinkClassName={\"page-link\"}\n                  previousClassName={\"page-item\"}\n                  previousLinkClassName={\"page-link\"}\n                  nextClassName={\"page-item\"}\n                  nextLinkClassName={\"page-link\"}\n                  breakClassName={\"page-item\"}\n                  breakLinkClassName={\"page-link\"}\n                  activeClassName={\"active\"}\n                />\n              )}\n            </div>\n          </div>\n        </>\n      ) : (\n        <>{error ? <ErrorScreen /> : <Loading />}</>\n      )}\n    </>\n  );\n}\n\nexport default SearchRepo;\n"]},"metadata":{},"sourceType":"module"}